---
title: "Setup Providers"
description: "Configure the required providers for your Sui dApp"
---

# Setting Up Providers

Providers are essential React context components that manage the state and configuration of your Sui dApp. This guide will show you how to set up all the necessary providers.

## Required Providers

Your Sui dApp needs three providers wrapped in the correct order:

1. **QueryClientProvider** - From @tanstack/react-query (outermost)
2. **SuiClientProvider** - Manages network connections
3. **WalletProvider** - Manages wallet state (innermost)

## Basic Setup

Here's the complete provider setup for your app:

```typescript
import {
  createNetworkConfig,
  SuiClientProvider,
  WalletProvider,
} from "@mysten/dapp-kit";
import { getFullnodeUrl } from "@mysten/sui/client";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

// Configure the networks you want to connect to
const { networkConfig } = createNetworkConfig({
  localnet: { url: getFullnodeUrl("localnet") },
  mainnet: { url: getFullnodeUrl("mainnet") },
  testnet: { url: getFullnodeUrl("testnet") },
  devnet: { url: getFullnodeUrl("devnet") },
});

// Create a QueryClient instance
const queryClient = new QueryClient();

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <SuiClientProvider networks={networkConfig} defaultNetwork="testnet">
        <WalletProvider>
          <YourApp />
        </WalletProvider>
      </SuiClientProvider>
    </QueryClientProvider>
  );
}

export default App;
```

## Provider Details

### 1. QueryClientProvider

The `QueryClientProvider` from React Query manages all the caching and data fetching state.

```typescript
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

const queryClient = new QueryClient();

<QueryClientProvider client={queryClient}>
  {/* Your app */}
</QueryClientProvider>;
```

**Configuration options:**

```typescript
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      // Time before queries are considered stale (default: 0)
      staleTime: 60 * 1000, // 1 minute
      // Time before inactive queries are garbage collected
      gcTime: 5 * 60 * 1000, // 5 minutes
      // Retry failed queries
      retry: 3,
    },
  },
});
```

### 2. SuiClientProvider

The `SuiClientProvider` manages connections to Sui blockchain networks.

**Props:**

- `networks` - Network configuration object
- `defaultNetwork` - The network to connect to initially (optional)

```typescript
import { createNetworkConfig, SuiClientProvider } from "@mysten/dapp-kit";
import { getFullnodeUrl } from "@mysten/sui/client";

const { networkConfig } = createNetworkConfig({
  mainnet: { url: getFullnodeUrl("mainnet") },
  testnet: { url: getFullnodeUrl("testnet") },
});

<SuiClientProvider networks={networkConfig} defaultNetwork="testnet">
  {/* Your app */}
</SuiClientProvider>;
```

#### Network Configuration

**Using official Sui RPC endpoints:**

```typescript
import { getFullnodeUrl } from "@mysten/sui/client";

const { networkConfig } = createNetworkConfig({
  mainnet: { url: getFullnodeUrl("mainnet") },
  testnet: { url: getFullnodeUrl("testnet") },
  devnet: { url: getFullnodeUrl("devnet") },
  localnet: { url: getFullnodeUrl("localnet") },
});
```

**Using custom RPC endpoints:**

```typescript
const { networkConfig } = createNetworkConfig({
  mainnetCustom: {
    url: "https://your-custom-rpc.com",
  },
  testnetCustom: {
    url: "https://testnet-rpc.example.com",
  },
});
```

#### Available Networks

| Network    | Description                  | URL                                   |
| ---------- | ---------------------------- | ------------------------------------- |
| `mainnet`  | Production network           | `https://fullnode.mainnet.sui.io:443` |
| `testnet`  | Test network for development | `https://fullnode.testnet.sui.io:443` |
| `devnet`   | Developer network (unstable) | `https://fullnode.devnet.sui.io:443`  |
| `localnet` | Local Sui node               | `http://127.0.0.1:9000`               |

<Warning>
  **Devnet** is reset frequently and should not be used for persistent testing.
  Use **testnet** for stable development.
</Warning>

### 3. WalletProvider

The `WalletProvider` manages wallet connection state and makes wallet functionality available to your app.

```typescript
import { WalletProvider } from "@mysten/dapp-kit";

<WalletProvider>{/* Your app */}</WalletProvider>;
```

**Props (all optional):**

```typescript
<WalletProvider
  // Sort these wallets to the top of the list
  preferredWallets={["Sui Wallet", "Suiet Wallet"]}
  // Filter which wallets to show
  walletFilter={(wallet) => wallet.name !== "Example Wallet"}
  // Enable unsafe burner wallet for testing
  enableUnsafeBurner={true}
  // Automatically reconnect to last used wallet
  autoConnect={true}
  // Customize storage for wallet state
  storage={window.localStorage}
  storageKey="sui-wallet-connection"
>
  {/* Your app */}
</WalletProvider>
```

#### WalletProvider Configuration Options

<Accordion title="preferredWallets">
  **Type:** `string[]` List of wallet names that should appear at the top of the
  wallet selection list. ```typescript preferredWallets=
  {["Sui Wallet", "Suiet Wallet", "Ethos Wallet"]}
  ```
</Accordion>

<Accordion title="walletFilter">
  **Type:** `(wallet: Wallet) => boolean` Function to filter which wallets are
  available to users. ```typescript walletFilter=
  {(wallet) => {
    // Only show wallets that support certain features
    return wallet.features.includes("sui:signAndExecuteTransaction");
  }}
  ```
</Accordion>

<Accordion title="enableUnsafeBurner">
  **Type:** `boolean` Enable a development-only burner wallet that generates a
  temporary keypair. **Never use in production!** ```typescript
  enableUnsafeBurner={process.env.NODE_ENV === "development"}
  ```
</Accordion>

<Accordion title="autoConnect">
  **Type:** `boolean` Automatically reconnect to the most recently used wallet
  when the app loads. ```typescript autoConnect={true} // Default: false ```
</Accordion>

<Accordion title="storage">
  **Type:** `Storage | null` Storage mechanism for persisting wallet connection.
  Set to `null` to disable persistence. ```typescript storage=
  {window.localStorage} // Default // or storage={null} // Disable persistence
  ```
</Accordion>

<Accordion title="storageKey">
  **Type:** `string` The key used to store wallet connection data. ```typescript
  storageKey="my-dapp-wallet" // Default: "sui-dapp-kit:wallet-connection-info"
  ```
</Accordion>

## Complete Example

Here's a production-ready setup with all providers configured:

```typescript title="src/main.tsx"
import React from "react";
import ReactDOM from "react-dom/client";
import {
  createNetworkConfig,
  SuiClientProvider,
  WalletProvider,
} from "@mysten/dapp-kit";
import { getFullnodeUrl } from "@mysten/sui/client";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import App from "./App";

// Import dApp Kit CSS
import "@mysten/dapp-kit/dist/index.css";

// Configure supported networks
const { networkConfig } = createNetworkConfig({
  mainnet: { url: getFullnodeUrl("mainnet") },
  testnet: { url: getFullnodeUrl("testnet") },
  devnet: { url: getFullnodeUrl("devnet") },
});

// Configure React Query
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 60 * 1000, // 1 minute
      gcTime: 5 * 60 * 1000, // 5 minutes
    },
  },
});

ReactDOM.createRoot(document.getElementById("root")!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <SuiClientProvider networks={networkConfig} defaultNetwork="testnet">
        <WalletProvider autoConnect={true} preferredWallets={["Sui Wallet"]}>
          <App />
        </WalletProvider>
      </SuiClientProvider>
    </QueryClientProvider>
  </React.StrictMode>
);
```

## Switching Networks

You can allow users to switch networks using the `useSuiClientContext` hook:

```typescript
import { useSuiClientContext } from "@mysten/dapp-kit";

function NetworkSwitcher() {
  const ctx = useSuiClientContext();

  return (
    <select
      value={ctx.network}
      onChange={(e) => ctx.selectNetwork(e.target.value)}
    >
      <option value="mainnet">Mainnet</option>
      <option value="testnet">Testnet</option>
      <option value="devnet">Devnet</option>
    </select>
  );
}
```

## Next Steps

With providers configured, you're ready to add wallet connection functionality to your app.

<Card
  title="Connect Wallet"
  icon="arrow-right"
  href="/04-connect-wallet"
  horizontal
>
  Add wallet connection with UI components
</Card>
